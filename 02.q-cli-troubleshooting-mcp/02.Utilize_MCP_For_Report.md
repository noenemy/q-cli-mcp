# MCP 서버를 이용하여 Price 를 예상하고 결과 보고서를 작성합니다.

이번 랩에서는 MCP 서버를 이용해서 Prime Day 를 위해 준비하는 비용과 장애대책 보고서 작성을 위한 공식 AWS Documentation을 확인합니다.

/home/ec2-user/.aws/amazonq/mcp.json 파일을 생성합니다. 그리고 본 랩의 폴더에 있는 [mcp.json](https://github.com/noenemy/q-cli-mcp/blob/main/02.q-cli-troubleshooting-mcp/mcp.json) 파일의 내용을 입력합니다.

<BR>

>[!NOTE]
>AWS Credential은 Workshop Studio에서 확인하여 mcp.json 파일에 입력합니다. 
>반드시 메모장 등에서 미리 파일을 준비하고, EC2 SSH 세션에서는 붙여넣기만 합니다.

<BR>

```
vi /home/ec2-user/.aws/amazonq/mcp.json
# 붙여넣기
```

### MCP 설정에 필요한 패키지를 설치합니다.
```
q chat
```

```
uvx 패키지를 설치해 주세요
```

uvx 패키지 설치가 완료되었으면 MCP 서버의 정상 동작 확인을 위해 q chat을 재시작합니다.
```
/quit
```
```
q chat
```
MCP 서버가 등록되었는지 아래 커맨드로 확인합니다.
```
/tools
```

### 적절한 WCU, RCU를 확인하고 이를 설정하기
```
이전 로드테스트의 결과에 따라 적절한 DDB의 WCU, RCU 의 값을 추천해 주세요. 
추천 WCU, RCU 값을 테이블 마다 적용해 주세요.
```

Products, Orders 등 Table들의 WCU, RCU를 테스트 결과에 따라 업데이트합니다.<br>
<img width="1391" height="893" alt="Screenshot 2025-07-18 at 6 09 20 AM" src="https://github.com/user-attachments/assets/4fb6ee79-c292-4292-9104-a82408ac5023" /> <br>
<img width="1606" height="460" alt="Screenshot 2025-07-18 at 6 11 49 AM" src="https://github.com/user-attachments/assets/bad8b21a-071f-4ba7-8e6b-081a59cc086f" />

DynamoDB 콘솔에서 WCU, RCU가 변경된 내용을 확인합니다.
<img width="1616" height="1024" alt="Screenshot 2025-07-18 at 6 13 13 AM" src="https://github.com/user-attachments/assets/58340ba8-5254-416c-8099-082a24655bf9" />



### Prime Day 용량 증설로 인한 비용 비교해 보기
이제 Prime Day로 인해서 AWS 비용이 평소에 비해 얼마나 늘어날 지 예측해 보겠습니다.
```
Prime day가 3일 지속되었다고 가정했을 때, 평소와 비교해서 늘어난 비용을 비교 분석해서 요약 정리해 주세요.
비용은 Pricing MCP 서버를 이용해주세요.
```

결과는 Prime Day 진행 시 비용과 평소 비용을 비교 정리한 결과를 보여줍니다.
<img width="1334" height="791" alt="Screenshot 2025-07-18 at 6 17 26 AM" src="https://github.com/user-attachments/assets/b459b5c8-65d3-4e31-b872-e6004b40961d" />

### 결과 보고를 위한 리포트 만들기
```
Prime Day 대비를 위해 진행한 로드 테스트의 내용과 장애 대응, 그리고 예상 비용을 요약 정리한 리포트를 html 페이지로 만들어주세요.
```

