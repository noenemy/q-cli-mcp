# Prime Day 이벤트 준비를 위한 Load Test 로 대비하기

DynamoDB 콘솔을 통해서 설정과 테이블들을 확인해 봅시다. 특히 Capacity mode가 On demand인지 확인합니다. <br>
<img width="1348" height="605" alt="Screenshot 2025-07-18 at 5 21 55 AM" src="https://github.com/user-attachments/assets/a53d8c61-48d9-4454-a1b3-6ff493d6fc23" />

### DynamoDB 설정 변경하기
평소 운영하는 DynamoDB가 큰 부하를 일으키지 않는다고 가정하고 아래와 같이 Provisioned Capacity를 설정합니다.

```
DynamoDB의 모든 테이블들을 Provisioned Capacity Mode로 변경하고 WCU 2, RCU 2으로 설정해 주세요.
```

관리 콘솔을 통해서 변경된 설정을 확인해 봅시다. On Demand에서 Provisioned로 변경되었는지 확인합니다.
<img width="1898" height="879" alt="Screenshot 2025-07-29 at 4 55 08 PM" src="https://github.com/user-attachments/assets/932b5514-51fd-44e8-b037-a0ed66b7868d" />


### Prime Day 준비하기
본격적으로 Prime Day를 위한 로드테스트를 준비합니다. Q Developer CLI가 생성하는 스크립트를 이용합니다. 
이커머스의 특성상 Peak load를 테스트하기 위해서 아래와 같은 로드 테스트 시나리오를 준비합니다.

```
이커머스 Amazon Prime Day를 예상하고 DynamoDB의 여러 테이블들에 부하를 주려고 합니다.
1) 짧은 시간 대량의 상품 조회 요청과 
2) 많은 주문 데이터 생성 시도가 발생하며
3) 위의 두가지는 동시에 일어납니다.
Load Tester를 위한 스크립트를 Python 으로 만들어 주세요. 
파일명과 위치는 /home/ec2-user/ddb/ddb_load_tester.py 입니다.
```
<img width="1175" height="752" alt="Screenshot 2025-07-29 at 5 01 45 PM" src="https://github.com/user-attachments/assets/9bf4e441-0d75-4313-a790-1e873063c60d" />


### Load Test 실행하기
파일 ddb_load_tester.py 의 작성이 완성되었다면, 사용법을 꼼꼼히 읽어보고부하테스트를 시작합니다. 
작성된 스크립트가 부여하는 로드가 충분하지 않을 것으로 생각된다면, 자연어로 개선을 요청합니다.

부하를 충분히 주도록 테스트를 10분 동안 20개 쓰레드를 이용해서 진행합니다. 
(잠시 커피 한잔하면서 지켜봅니다.)
<img width="1255" height="487" alt="Screenshot 2025-07-18 at 5 40 13 AM" src="https://github.com/user-attachments/assets/a74e936a-1bc0-4cbb-ad53-ce1b19cfd997" />
<img width="1277" height="128" alt="Screenshot 2025-07-18 at 5 42 29 AM" src="https://github.com/user-attachments/assets/acc5bd7c-1b84-4216-a7c7-e3ab52b9939f" />

결과를 확인하고 옆에 동료와 비교해 봅니다.<br>
<img width="354" height="262" alt="2025-07-17 204202" src="https://github.com/user-attachments/assets/f2803688-6079-4a09-8e82-8fd543deb07a" />


부하가 충분히 발생했다면, 어떻게 대비하면 좋은지 Q Developer CLI에 질의합니다.
```
이러한 수준의 부하가 발생했을 때, 운영자가 취할 수 있는 방법을 300자 이하로 요약 정리해주세요.
1) 사용자의 경험이 나빠지는 것을 사전에 방지하고 
2) 사전 준비를 함에도 불구하고 실제 이벤트에서 문제가 발생했을 때 조치방법. 실제 이벤트 시에는 부하가 가중될 수 있습니다.
```
요약 정리된 내용을 확인했다면 Support Case로 정확히 확인하도록 준비를 요청합니다.
```
위의 요약 정리된 내용이 정확한지 Support Case로 문의할 예정입니다.
진행한 부하테스트와 해결 방법을 문의하도록 제목과 내용을 300자 이하로 작성해주세요. 
```
<img width="1323" height="748" alt="Screenshot 2025-07-18 at 5 58 28 AM" src="https://github.com/user-attachments/assets/16983850-1b98-449c-a7a9-2a24e8f5b2eb" />

