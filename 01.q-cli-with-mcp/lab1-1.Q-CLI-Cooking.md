# Lab 1-1. Q CLI 요리하기
## 개요 
Amazon Q CLI에 자연어로 지시해서 원하는 서비스를 만들고 Troubleshooting도 가능합니다. 

MacOS 또는 Linux 사용자는 Q CLI를 로컬에서 바로 설치할 수 있습니다. 
[링크](https://docs.aws.amazon.com/amazonq/latest/qdeveloper-ug/command-line-installing.html)를 클릭하여 Q CLI를 다운로드 할 수 있습니다. 

이 랩에서는 온라인 쇼핑 데이터를 관리하는 웹서비스를 만들어 봅니다.DynamoDB로 데이터베이스를 만들고, EC2 인스턴스 로컬에서 서비스를 호스팅 합니다.

**Let's go!**

* Q CLI의 자연어 쿼리는 다음과 같이 실행합니다.
```
q chat
```

* 다음과 같이 입력해서 이커머스 고객 데이터를 만들어 봅니다.
```
가짜 이커머스 고객의 데이터 10개만 만들어봐. 
```

* 이번에는 출력을 더욱 간단히 하기 위해 단순 줄 형식으로 출력하라 지시해 보겠습니다.
```
가짜 이커머스 고객의 데이터 10개만 만들어봐. 줄 형식으로
```

* q chat을 빠져나오기 위해서는 다음과 같이 입력합니다.  q chat 내에서 `/` 를 입력하면 다양한 커맨드를 확인할 수 있습니다.
```
/quit
```

* q chat에 가능한 일관된 응답을 받기 위해 Context 를 만들어 보겠습니다. 
다음과 같이 markdown 파일로 입력합니다.
```
cat > mycontext.md << EOF
지시사항을 응답 과정에서 명시적으로 참조하라
너는 AWS를 잘 사용하는 이커머스 서비스 개발자이다.
가장 간단하고 빠르게 서비스를 만들어낸다.
반드시 한국어로 응답하라
기술 용어 등은 영어를 그대로 사용하라 
모든 AWS 리소스와 작업할 시 us-east-1 리전을 사용하라.
/home/ec2-user/.amazonq/mcp.json 파일을 수정할 때는 기존 파일의 내용을 유지한채로 추가하라. 반드시 기존 내용을 유지하라.
Amazon, AWS 관련 MCP 서버 리스트는 공식 링크인 https://github.com/awslabs/mcp/tree/main/src 에서만 확인하라.
Amazon, AWS 관련 MCP서버를 설치할때는 공식 링크만 사용하라.  
DynamoDB의 describe_table 결과에서 ItemCount는 실시간 정보가 아니므로 사용하지 말 것
EOF
```

* 이 컨텍스트 파일을 q chat이 항상 참조하도록 알려주려면 다음과 같이 입력합니다.
```
q chat
/context add mycontext.md --global
```

* 위의 컨텍스트가 잘 추가 되었는지 확인합니다.
```
/context show
```

* 테스트 환경을 만들기 위해 다음과 같이 q chat에 지시합니다.
```
DynamoDB를 이용해서 이커머스 데이터베이스를 만들어줘. 
테이블은 총 4개로 1) 카테고리 2) 제품 3) 고객 4) 주문
제품에는 에어콘과 난방기를 포함하라.
샘플 데이타는 테이블당 10개 이하로 만들어줘
```
* 컨텍스트 입력 전 후, Q CLI의 응답에 변화가 있었나요? 어떤 것인가요?

* DynamoDB에 테이블 4개가 모두 생성되었는지, 샘플 데이타가 있는지 확인해 봅니다. 혹시 누락된 것이 있다면 q chat에 지시해서 보완합니다.
```
DynamoDB에 테이블 4개가 모두 생성되었는지, 샘플 데이타가 있는지 확인해줘. 
```

* 데이터베이스를 이용해서 이 데이터베이스에 입출력을 할 수 있도록 웹서비스를 만들어 보겠습니다. 지시 사항을 아래와 같이 지정한 이유는 빠르게 만들기 위함입니다.
```
지금 있는 DynamoDB를 이용해서 이커머스 데이터베이스를 관리할 수 있는 웹서비스를 만들어줘.
단, 다음 조건을 지켜서 구현해줘:
1. Python 내장 HTTP 서버(http.server)만 사용할 것
2. 모든 UI를 단일 HTML 파일로 구현할 것
3. JavaScript와 CSS는 HTML 파일 내에 포함할 것
4. CRUD 기능을 모두 구현할 것
5. 간단한 검색 기능 포함할 것
```

* 완료가 되었습니까? 혹시 중간에 끊기거나 완료되지 않으면 `계속해라` 라고 입력해 보세요.
* 완료가 되었다면 Q CLI가 만들어준 URL로 접속해보세요. 잘 되시나요? 잘 되지 않는다면 Q CLI에 질의해 보세요.
```
너가 만들어준 웹서비스로 왜 접속할 수 없지? 
```

* 요구사항이 변경되어 리뷰라는 항목이 추가되어야 합니다. 데이터베이스와 웹서버 모두 변경이 필요합니다. Q CLI에 요구사항을 입력합니다.
```
리뷰라는 항목을 추가하고싶다. 웹서버와 다이나모 디비 모두 변경해줘.
```
* 웹사이트를 둘러보고 만약 문제가 보이거나 변경하고 싶은 부분이 있다면 자연어로 지시합니다.
