# Lab 1-1. Q Dev CLI 요리하기
## 개요 
Amazon Q Dev CLI에 자연어로 지시해서 쉽고 빠르게 서비스를 만들 수 있습니다.
이 랩에서는 온라인 쇼핑 데이터를 관리하는 웹서비스를 만들어 봅니다. 데이터베이스는 DynamoDB로, 웹서비스는 EC2 Instance 에서 호스팅 합니다.

AWS에 대한 지식이 없더라도 자연어로 서비스를 구현 가능합니다.
 
**Let's go!**

* Q Dev CLI와 자연어 채팅을 시작하려면 다음과 같이 실행합니다. 
```
q chat
```

* 다음과 같이 입력해서 샘플 이커머스 고객 데이터를 만들어 봅니다.
```
10개의 샘플 이커머스 고객의 데이터를 만들어 주세요. 
```
출력이 어떤 모습인가요? 다른 동료와 출력 결과를 확인해 보세요.

* 이번에는 출력 결과를 명시적으로 간단하게 하기 위해 지시 내용에 다음과 같이 추가해 실행해 봅니다.
```
10개의 샘플 이커머스 고객의 데이터를 만들어 주세요. 줄 형식으로
```
이전 출력과 어떻게 달라졌나요? 여러분이 스스로 주문을 추가해 보세요.

* q chat을 종료하기 위해서는 다음과 같이 입력합니다.  
참고) q chat 내에서 `/` 를 입력하면 다양한 커맨드를 확인할 수 있습니다.
```
/quit
```

* q chat으로부터 일관된 응답을 받기 위해 Context를 입력하여 응답 내용을 지시하겠습니다.
다음과 같이 markdown 파일로 입력합니다. 
```
cat > mycontext.md << EOF
지시사항을 응답 과정에서 명시적으로 참조하라.
당신은 AWS를 잘 사용하는 이커머스 서비스 개발자이다.
가장 간단하고 빠르게 서비스를 만든다.
반드시 한국어로 응답하라.
기술 용어 등은 영어를 그대로 사용하라 .
추측한 응답은 반드시 추측을 하였다고 명시하여라.
모든 AWS 리소스와 작업할 시 us-east-1 리전을 사용하라.
/home/ec2-user/.amazonq/mcp.json 파일을 수정할 때는 기존 파일의 내용을 유지한채로 추가하라. 반드시 기존 내용을 유지하라.
Amazon, AWS 관련 MCP 서버 리스트는 공식 링크인 https://github.com/awslabs/mcp/tree/main/src 에서만 확인하라.
Amazon, AWS 관련 MCP서버를 설치할때는 공식 링크만 사용하라.  
DynamoDB의 describe_table 결과에서 ItemCount는 실시간 정보가 아니므로 사용하지 말 것
EOF
```

* 이제 지시사항을 적용하기 위해 q chat에 다시 접속합니다. 
```
q chat
```

* 작성된 mycontext.md 파일을 q chat이 참조하도록 합니다.
```
/context add mycontext.md
```

* 위의 Context가 잘 추가 되었는지 확인합니다.
```
/context show
```
현재 profile에 mycontext.md 파일이 추가되어 있습니다. Q Dev CLI 에서는 여러 개의 profile을 가질 수 있고, 각 profile은 다른 Context 를 맵핑할 수 있습니다. 자세한 내용은 [링크](https://docs.aws.amazon.com/amazonq/latest/qdeveloper-ug/command-line-context-profiles.html)에서 확인 가능합니다.

* 이제 우리는 DynamoDB를 이용해서 데이터베이스를 만들 것입니다. q chat에 다음과 같이 지시합니다.
```
DynamoDB를 이용해서 이커머스 데이터베이스를 만들어주세요. 
테이블은 총 4개입니다. 1) 카테고리 2) 제품 3) 고객 4) 주문
제품에는 에어콘과 난방기를 포함하세요.
각 테이블마다 샘플 데이타는 테이블당 50개 이하로 만들어주세요.
```
이제 데이터베이스가 만들어지고 있을 겁니다. DynamoDB에 대한 지식이 없는 누구도 쉽게 만들 수 있습니다.
컨텍스트 입력 전 후, Q CLI의 응답에 변화가 있었나요? 어떤 것인가요?

* DynamoDB에 테이블 4개가 모두 생성되었는지, 각 테이블마다 샘플 데이타가 모두 지시대로 생성되었는지 확인해 봅니다. 혹시 누락된 것이 있다면 q chat에 직접 지시해서 보완합니다.
```
DynamoDB에 테이블 4개가 모두 생성되었는지, 각 테이블마다 샘플 데이타가 있는지 확인해주세요. 
```
4개의 테이블에 모두 만들어져 있나요? 
샘플 데이타가 모두 만들어졌나요?
AWS 콘솔에서 DynamoDB 콘솔로 이동해서 확인해보세요. q chat은 지시받은 대로 일을 처리했나요?

* 이 데이터베이스에 입출력을 할 수 있도록 웹서비스를 만들어 보겠습니다. 지시 사항을 아래와 같이 지정하는 이유는 빠르게 시스템을 구축하기 위함입니다. 
```
지금 있는 DynamoDB를 이용해서 이커머스 데이터베이스를 관리할 수 있는 웹서비스를 로컬에 만들어주세요.
단, 다음 조건을 지켜서 구현할 것:
1. Python 내장 HTTP 서버(http.server)만 사용할 것
2. 모든 UI를 단일 HTML 파일로 구현할 것
3. JavaScript와 CSS는 HTML 파일 내에 포함할 것
4. CRUD 기능을 모두 구현할 것
5. 간단한 검색 기능 포함할 것
```
이제 Q Dev CLI 는 웹 애플리케이션을 만들 것입니다.

* 완료가 되었습니까? 혹시 중간에 끊기거나 완료되지 않으면 `계속하세요` 라고 입력해 보세요.

* 완료가 되었다면 웹서비스의 포트를 확인하세요. 그리고 현재 접속한 EC2 Instance의 Public IP와 포트를 이용해서 URL로 접속해보세요. `http://<publicIP>:port`

* 접속을 할 수 있습니까? 접속이 되지 않는다면 q chat에 질의해 보세요.
```
당신이 위에서 만들어 준 웹서비스로 접속이 되지 않습니다. 원인을 알려주세요. 
```
* 접속을 할 수 있으면 웹페이지를 둘러보세요. 옆에 있는 동료의 웹페이지와 비교해 보세요.
* 웹페이지는 잘 동작하나요? 동작하는지 검증해 보세요.
* 시스템 구축 단계에서 요구사항이 변경된다고 가정합니다. 우리 시스템에는 `리뷰`라는 항목이 추가되어야 합니다. 데이터베이스와 웹서버 모두 변경이 필요합니다. q chat 에 요구사항을 입력합니다.
```
리뷰라는 항목이 추가되어야 합니다. 웹서비스와 다이나모 디비 모두 리뷰라는 항목이 추가되도록 변경해 주세요.
```
q chat 이 수정을 잘 하고 있나요? 검수해보세요. 

* 완료된 후에 웹사이트를 둘러보고 만약 문제가 보이나요? 
* 변경하고 싶은 부분이 있나요? 
* 여러분 만의 요구사항을 자연어로 지시해 보세요.
